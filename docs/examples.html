---

title: Examples

keywords: fastai
sidebar: home_sidebar

summary: "Examples of the PCT library in use."
description: "Examples of the PCT library in use."
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs\00_examples.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">gym</span> 
<span class="kn">import</span> <span class="nn">os</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">os</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">name</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Acrobot">Acrobot<a class="anchor-link" href="#Acrobot"> </a></h2><p>The goal is for the end effector to be one link length above the horizontal.</p>
<p>The observations of the Acrobat system are the sin and cos values of the two joint angles and also the angular velocities of the two joints.</p>
<p>That is,</p>
<p>0 - cos of the angle of link 1</p>
<p>1 - sin of the angle of link 1</p>
<p>2 - cos of the angle of link 2</p>
<p>3 - sin of the angle of link 2</p>
<p>4 - velocity of link 1</p>
<p>5 - velocity of link 2</p>
<p>An angle of 0 for the first link means it is pointing downwards.</p>
<p>An angle of 0 for the second link means it is in line with the first link (I think).</p>
<p>So, the starting position of pointing downwards has both angles as 0. Therefore, the initial state is 
[1, 0, 1, 0, 0, 0]</p>
<p>The ideal goal state, then, would be, [-1,0, 1, 0, 0, 0], which is pointing upwards.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">pct.hierarchy</span> <span class="kn">import</span> <span class="n">PCTHierarchy</span>
<span class="kn">from</span> <span class="nn">pct.functions</span> <span class="kn">import</span> <span class="n">OpenAIGym</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> 
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">acrobot_hierarchy</span> <span class="o">=</span> <span class="n">PCTHierarchy</span><span class="p">(</span><span class="n">rows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">cols</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;acrobot_hierarchy&quot;</span><span class="p">)</span>
<span class="n">acrobot</span> <span class="o">=</span> <span class="n">OpenAIGym</span><span class="p">(</span><span class="s2">&quot;Acrobot-v1&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Acrobot-v1&quot;</span><span class="p">,</span> <span class="n">render</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">link</span> <span class="o">=</span> <span class="n">acrobot_hierarchy</span><span class="o">.</span><span class="n">get_output_function</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">link</span><span class="o">.</span><span class="n">get_config</span><span class="p">())</span>
<span class="n">acrobot</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="n">link</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>{&#39;type&#39;: &#39;Proportional&#39;, &#39;name&#39;: &#39;proportional&#39;, &#39;value&#39;: 0, &#39;links&#39;: {0: &#39;subtract&#39;}, &#39;gain&#39;: 10}
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">acrobot_hierarchy</span><span class="o">.</span><span class="n">add_preprocessor</span><span class="p">(</span><span class="n">acrobot</span><span class="p">)</span>
<span class="n">acrobot_hierarchy</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>acrobot_hierarchy PCTHierarchy
**************************
PRE: Acrobot-v1 OpenAIGym | 0 | links  proportional 
Level 0
row0col0 PCTNode
----------------------------
REF: constant Constant | 1 
PER: variable Variable | 0 
COM: subtract Subtract | 0 | links  constant variable 
OUT: proportional Proportional | gain 10 | 0 | links  subtract 
----------------------------
PRE: None
**************************
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">acrobot_hierarchy</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>10</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">env = gym.make(&quot;Acrobot-v1&quot;)</span>
<span class="sd">env.reset()</span>
<span class="sd">obs = env.step(1)</span>
<span class="sd">&quot;&quot;&quot;</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;\nenv = gym.make(&#34;Acrobot-v1&#34;)\nenv.reset()\nobs = env.step(1)\n&#39;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">env.reset()</span>
<span class="sd">alt=3</span>

<span class="sd">for i in range(10):</span>
<span class="sd">    alt+=1</span>
<span class="sd">    for j in range(alt):</span>
<span class="sd">        obs = env.step(1)</span>
<span class="sd">        if os==&quot;nt&quot;:</span>
<span class="sd">            env.render()</span>
<span class="sd">        print(f&#39;{obs[0][0]:0.2f} {obs[0][1]:0.2f} {obs[0][2]:0.2f} {obs[0][3]:0.2f} {obs[0][4]:0.2f} {obs[0][5]:0.2f}&#39;)</span>
<span class="sd">    for k in range(alt):</span>
<span class="sd">        obs = env.step(-1)</span>
<span class="sd">        if os==&quot;nt&quot;:</span>
<span class="sd">            env.render()</span>
<span class="sd">        print(f&#39;{obs[0][0]:0.2f} {obs[0][1]:0.2f} {obs[0][2]:0.2f} {obs[0][3]:0.2f} {obs[0][4]:0.2f} {obs[0][5]:0.2f}&#39;)</span>
<span class="sd">&quot;&quot;&quot;</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;\nenv.reset()\nalt=3\n\nfor i in range(10):\n    alt+=1\n    for j in range(alt):\n        obs = env.step(1)\n        if os==&#34;nt&#34;:\n            env.render()\n        print(f\&#39;{obs[0][0]:0.2f} {obs[0][1]:0.2f} {obs[0][2]:0.2f} {obs[0][3]:0.2f} {obs[0][4]:0.2f} {obs[0][5]:0.2f}\&#39;)\n    for k in range(alt):\n        obs = env.step(-1)\n        if os==&#34;nt&#34;:\n            env.render()\n        print(f\&#39;{obs[0][0]:0.2f} {obs[0][1]:0.2f} {obs[0][2]:0.2f} {obs[0][3]:0.2f} {obs[0][4]:0.2f} {obs[0][5]:0.2f}\&#39;)\n&#39;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">acrobot</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>
 

