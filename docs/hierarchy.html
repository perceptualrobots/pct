---

title: Hierarchy

keywords: fastai
sidebar: home_sidebar



---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs\04_hierarchy.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="PCTHierarchy" class="doc_header"><code>class</code> <code>PCTHierarchy</code><a href="https://github.com/perceptualrobots/pct/tree/master/pct/hierarchy.py#L11" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>PCTHierarchy</code>(<strong><code>rows</code></strong>=<em><code>0</code></em>, <strong><code>cols</code></strong>=<em><code>0</code></em>, <strong><code>pre</code></strong>=<em><code>[]</code></em>, <strong><code>post</code></strong>=<em><code>[]</code></em>, <strong><code>name</code></strong>=<em><code>'pcthierarchy'</code></em>, <strong><code>clear_names</code></strong>=<em><code>True</code></em>, <strong><code>links</code></strong>=<em><code>'single'</code></em>, <strong><code>history</code></strong>=<em><code>False</code></em>, <strong>**<code>pargs</code></strong>)</p>
</blockquote>
<p>A hierarchical perceptual control system, of PCTNodes.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Creating-a-Hierarchy">Creating a Hierarchy<a class="anchor-link" href="#Creating-a-Hierarchy"> </a></h2><p>Create a hierarchy by defining the number of rows (levels) and columns.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pre</span><span class="o">=</span><span class="n">Constant</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;precon&#39;</span><span class="p">)</span>
<span class="n">post</span><span class="o">=</span><span class="n">Constant</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;postcon&#39;</span><span class="p">)</span>
<span class="n">hpct</span> <span class="o">=</span> <span class="n">PCTHierarchy</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span> <span class="n">pre</span><span class="o">=</span><span class="p">[</span><span class="n">pre</span><span class="p">],</span> <span class="n">post</span><span class="o">=</span><span class="p">[</span><span class="n">post</span><span class="p">],</span> <span class="n">history</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">clear_names</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">links</span><span class="o">=</span><span class="s2">&quot;dense&quot;</span><span class="p">)</span>
<span class="n">hpct</span><span class="o">.</span><span class="n">hierarchy</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>[[&lt;pct.nodes.PCTNode at 0x180fee4afc8&gt;,
  &lt;pct.nodes.PCTNode at 0x180fef6d708&gt;,
  &lt;pct.nodes.PCTNode at 0x180fee87248&gt;],
 [&lt;pct.nodes.PCTNode at 0x180fee87b08&gt;,
  &lt;pct.nodes.PCTNode at 0x180fee87148&gt;,
  &lt;pct.nodes.PCTNode at 0x180fee11088&gt;],
 [&lt;pct.nodes.PCTNode at 0x180fef2d908&gt;,
  &lt;pct.nodes.PCTNode at 0x180fef3cbc8&gt;,
  &lt;pct.nodes.PCTNode at 0x180fee41c48&gt;]]</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Create a hierarchy from a configuration.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">h</span> <span class="o">=</span> <span class="n">PCTHierarchy</span><span class="o">.</span><span class="n">from_config</span><span class="p">(</span><span class="n">hpct</span><span class="o">.</span><span class="n">get_config</span><span class="p">())</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="n">h</span><span class="o">.</span><span class="n">get_config</span><span class="p">()</span> <span class="o">==</span> <span class="n">hpct</span><span class="o">.</span><span class="n">get_config</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Viewing-a-Hierarchy">Viewing a Hierarchy<a class="anchor-link" href="#Viewing-a-Hierarchy"> </a></h2><p>The hierarchy details can be viewed as a summary.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">hpct</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>pcthierarchy PCTHierarchy
**************************
PRE: precon Constant | 5 
Level 0
row0col0 PCTNode
----------------------------
REF: weighted_sum WeightedSum | 0 | links  proportional3 proportional4 proportional5 
PER: variable Variable | 0 
COM: subtract Subtract | 0 | links  weighted_sum variable 
OUT: proportional Proportional | gain 10 | 0 | links  subtract 
----------------------------
row0col1 PCTNode
----------------------------
REF: weighted_sum1 WeightedSum | 0 | links  proportional3 proportional4 proportional5 
PER: variable1 Variable | 0 
COM: subtract1 Subtract | 0 | links  weighted_sum1 variable1 
OUT: proportional1 Proportional | gain 10 | 0 | links  subtract1 
----------------------------
row0col2 PCTNode
----------------------------
REF: weighted_sum2 WeightedSum | 0 | links  proportional3 proportional4 proportional5 
PER: variable2 Variable | 0 
COM: subtract2 Subtract | 0 | links  weighted_sum2 variable2 
OUT: proportional2 Proportional | gain 10 | 0 | links  subtract2 
----------------------------
Level 1
row1col0 PCTNode
----------------------------
REF: weighted_sum4 WeightedSum | 0 | links  proportional6 proportional7 proportional8 
PER: weighted_sum3 WeightedSum | 0 | links  variable variable1 variable2 
COM: subtract3 Subtract | 0 | links  weighted_sum4 weighted_sum3 
OUT: proportional3 Proportional | gain 10 | 0 | links  subtract3 
----------------------------
row1col1 PCTNode
----------------------------
REF: weighted_sum6 WeightedSum | 0 | links  proportional6 proportional7 proportional8 
PER: weighted_sum5 WeightedSum | 0 | links  variable variable1 variable2 
COM: subtract4 Subtract | 0 | links  weighted_sum6 weighted_sum5 
OUT: proportional4 Proportional | gain 10 | 0 | links  subtract4 
----------------------------
row1col2 PCTNode
----------------------------
REF: weighted_sum8 WeightedSum | 0 | links  proportional6 proportional7 proportional8 
PER: weighted_sum7 WeightedSum | 0 | links  variable variable1 variable2 
COM: subtract5 Subtract | 0 | links  weighted_sum8 weighted_sum7 
OUT: proportional5 Proportional | gain 10 | 0 | links  subtract5 
----------------------------
Level 2
row2col0 PCTNode
----------------------------
REF: constant Constant | 1 
PER: weighted_sum9 WeightedSum | 0 | links  weighted_sum3 weighted_sum5 weighted_sum7 
COM: subtract6 Subtract | 0 | links  constant weighted_sum9 
OUT: proportional6 Proportional | gain 10 | 0 | links  subtract6 
----------------------------
row2col1 PCTNode
----------------------------
REF: constant1 Constant | 1 
PER: weighted_sum10 WeightedSum | 0 | links  weighted_sum3 weighted_sum5 weighted_sum7 
COM: subtract7 Subtract | 0 | links  constant1 weighted_sum10 
OUT: proportional7 Proportional | gain 10 | 0 | links  subtract7 
----------------------------
row2col2 PCTNode
----------------------------
REF: constant2 Constant | 1 
PER: weighted_sum11 WeightedSum | 0 | links  weighted_sum3 weighted_sum5 weighted_sum7 
COM: subtract8 Subtract | 0 | links  constant2 weighted_sum11 
OUT: proportional8 Proportional | gain 10 | 0 | links  subtract8 
----------------------------
PRE: postcon Constant | 10 
**************************
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The hierarchy details can be viewed as a configuration. That configuration can be used to create a hierarchy, as shown above.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">hpct</span><span class="o">.</span><span class="n">get_config</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;type&#39;: &#39;PCTHierarchy&#39;,
 &#39;name&#39;: &#39;pcthierarchy&#39;,
 &#39;pre&#39;: {&#39;pre0&#39;: {&#39;type&#39;: &#39;Constant&#39;,
   &#39;name&#39;: &#39;precon&#39;,
   &#39;value&#39;: 5,
   &#39;links&#39;: {}}},
 &#39;levels&#39;: {&#39;level0&#39;: {&#39;level&#39;: 0,
   &#39;nodes&#39;: {&#39;col0&#39;: {&#39;col&#39;: 0,
     &#39;node&#39;: {&#39;type&#39;: &#39;PCTNode&#39;,
      &#39;name&#39;: &#39;row0col0&#39;,
      &#39;refcoll&#39;: {&#39;0&#39;: {&#39;type&#39;: &#39;WeightedSum&#39;,
        &#39;name&#39;: &#39;weighted_sum&#39;,
        &#39;value&#39;: 0,
        &#39;links&#39;: {0: &#39;proportional3&#39;, 1: &#39;proportional4&#39;, 2: &#39;proportional5&#39;},
        &#39;weights&#39;: array([1., 1., 1.])}},
      &#39;percoll&#39;: {&#39;0&#39;: {&#39;type&#39;: &#39;Variable&#39;,
        &#39;name&#39;: &#39;variable&#39;,
        &#39;value&#39;: 0,
        &#39;links&#39;: {}}},
      &#39;comcoll&#39;: {&#39;0&#39;: {&#39;type&#39;: &#39;Subtract&#39;,
        &#39;name&#39;: &#39;subtract&#39;,
        &#39;value&#39;: 0,
        &#39;links&#39;: {0: &#39;weighted_sum&#39;, 1: &#39;variable&#39;}}},
      &#39;outcoll&#39;: {&#39;0&#39;: {&#39;type&#39;: &#39;Proportional&#39;,
        &#39;name&#39;: &#39;proportional&#39;,
        &#39;value&#39;: 0,
        &#39;links&#39;: {0: &#39;subtract&#39;},
        &#39;gain&#39;: 10}}}},
    &#39;col1&#39;: {&#39;col&#39;: 1,
     &#39;node&#39;: {&#39;type&#39;: &#39;PCTNode&#39;,
      &#39;name&#39;: &#39;row0col1&#39;,
      &#39;refcoll&#39;: {&#39;0&#39;: {&#39;type&#39;: &#39;WeightedSum&#39;,
        &#39;name&#39;: &#39;weighted_sum1&#39;,
        &#39;value&#39;: 0,
        &#39;links&#39;: {0: &#39;proportional3&#39;, 1: &#39;proportional4&#39;, 2: &#39;proportional5&#39;},
        &#39;weights&#39;: array([1., 1., 1.])}},
      &#39;percoll&#39;: {&#39;0&#39;: {&#39;type&#39;: &#39;Variable&#39;,
        &#39;name&#39;: &#39;variable1&#39;,
        &#39;value&#39;: 0,
        &#39;links&#39;: {}}},
      &#39;comcoll&#39;: {&#39;0&#39;: {&#39;type&#39;: &#39;Subtract&#39;,
        &#39;name&#39;: &#39;subtract1&#39;,
        &#39;value&#39;: 0,
        &#39;links&#39;: {0: &#39;weighted_sum1&#39;, 1: &#39;variable1&#39;}}},
      &#39;outcoll&#39;: {&#39;0&#39;: {&#39;type&#39;: &#39;Proportional&#39;,
        &#39;name&#39;: &#39;proportional1&#39;,
        &#39;value&#39;: 0,
        &#39;links&#39;: {0: &#39;subtract1&#39;},
        &#39;gain&#39;: 10}}}},
    &#39;col2&#39;: {&#39;col&#39;: 2,
     &#39;node&#39;: {&#39;type&#39;: &#39;PCTNode&#39;,
      &#39;name&#39;: &#39;row0col2&#39;,
      &#39;refcoll&#39;: {&#39;0&#39;: {&#39;type&#39;: &#39;WeightedSum&#39;,
        &#39;name&#39;: &#39;weighted_sum2&#39;,
        &#39;value&#39;: 0,
        &#39;links&#39;: {0: &#39;proportional3&#39;, 1: &#39;proportional4&#39;, 2: &#39;proportional5&#39;},
        &#39;weights&#39;: array([1., 1., 1.])}},
      &#39;percoll&#39;: {&#39;0&#39;: {&#39;type&#39;: &#39;Variable&#39;,
        &#39;name&#39;: &#39;variable2&#39;,
        &#39;value&#39;: 0,
        &#39;links&#39;: {}}},
      &#39;comcoll&#39;: {&#39;0&#39;: {&#39;type&#39;: &#39;Subtract&#39;,
        &#39;name&#39;: &#39;subtract2&#39;,
        &#39;value&#39;: 0,
        &#39;links&#39;: {0: &#39;weighted_sum2&#39;, 1: &#39;variable2&#39;}}},
      &#39;outcoll&#39;: {&#39;0&#39;: {&#39;type&#39;: &#39;Proportional&#39;,
        &#39;name&#39;: &#39;proportional2&#39;,
        &#39;value&#39;: 0,
        &#39;links&#39;: {0: &#39;subtract2&#39;},
        &#39;gain&#39;: 10}}}}}},
  &#39;level1&#39;: {&#39;level&#39;: 1,
   &#39;nodes&#39;: {&#39;col0&#39;: {&#39;col&#39;: 0,
     &#39;node&#39;: {&#39;type&#39;: &#39;PCTNode&#39;,
      &#39;name&#39;: &#39;row1col0&#39;,
      &#39;refcoll&#39;: {&#39;0&#39;: {&#39;type&#39;: &#39;WeightedSum&#39;,
        &#39;name&#39;: &#39;weighted_sum4&#39;,
        &#39;value&#39;: 0,
        &#39;links&#39;: {0: &#39;proportional6&#39;, 1: &#39;proportional7&#39;, 2: &#39;proportional8&#39;},
        &#39;weights&#39;: array([1., 1., 1.])}},
      &#39;percoll&#39;: {&#39;0&#39;: {&#39;type&#39;: &#39;WeightedSum&#39;,
        &#39;name&#39;: &#39;weighted_sum3&#39;,
        &#39;value&#39;: 0,
        &#39;links&#39;: {0: &#39;variable&#39;, 1: &#39;variable1&#39;, 2: &#39;variable2&#39;},
        &#39;weights&#39;: array([1., 1., 1.])}},
      &#39;comcoll&#39;: {&#39;0&#39;: {&#39;type&#39;: &#39;Subtract&#39;,
        &#39;name&#39;: &#39;subtract3&#39;,
        &#39;value&#39;: 0,
        &#39;links&#39;: {0: &#39;weighted_sum4&#39;, 1: &#39;weighted_sum3&#39;}}},
      &#39;outcoll&#39;: {&#39;0&#39;: {&#39;type&#39;: &#39;Proportional&#39;,
        &#39;name&#39;: &#39;proportional3&#39;,
        &#39;value&#39;: 0,
        &#39;links&#39;: {0: &#39;subtract3&#39;},
        &#39;gain&#39;: 10}}}},
    &#39;col1&#39;: {&#39;col&#39;: 1,
     &#39;node&#39;: {&#39;type&#39;: &#39;PCTNode&#39;,
      &#39;name&#39;: &#39;row1col1&#39;,
      &#39;refcoll&#39;: {&#39;0&#39;: {&#39;type&#39;: &#39;WeightedSum&#39;,
        &#39;name&#39;: &#39;weighted_sum6&#39;,
        &#39;value&#39;: 0,
        &#39;links&#39;: {0: &#39;proportional6&#39;, 1: &#39;proportional7&#39;, 2: &#39;proportional8&#39;},
        &#39;weights&#39;: array([1., 1., 1.])}},
      &#39;percoll&#39;: {&#39;0&#39;: {&#39;type&#39;: &#39;WeightedSum&#39;,
        &#39;name&#39;: &#39;weighted_sum5&#39;,
        &#39;value&#39;: 0,
        &#39;links&#39;: {0: &#39;variable&#39;, 1: &#39;variable1&#39;, 2: &#39;variable2&#39;},
        &#39;weights&#39;: array([1., 1., 1.])}},
      &#39;comcoll&#39;: {&#39;0&#39;: {&#39;type&#39;: &#39;Subtract&#39;,
        &#39;name&#39;: &#39;subtract4&#39;,
        &#39;value&#39;: 0,
        &#39;links&#39;: {0: &#39;weighted_sum6&#39;, 1: &#39;weighted_sum5&#39;}}},
      &#39;outcoll&#39;: {&#39;0&#39;: {&#39;type&#39;: &#39;Proportional&#39;,
        &#39;name&#39;: &#39;proportional4&#39;,
        &#39;value&#39;: 0,
        &#39;links&#39;: {0: &#39;subtract4&#39;},
        &#39;gain&#39;: 10}}}},
    &#39;col2&#39;: {&#39;col&#39;: 2,
     &#39;node&#39;: {&#39;type&#39;: &#39;PCTNode&#39;,
      &#39;name&#39;: &#39;row1col2&#39;,
      &#39;refcoll&#39;: {&#39;0&#39;: {&#39;type&#39;: &#39;WeightedSum&#39;,
        &#39;name&#39;: &#39;weighted_sum8&#39;,
        &#39;value&#39;: 0,
        &#39;links&#39;: {0: &#39;proportional6&#39;, 1: &#39;proportional7&#39;, 2: &#39;proportional8&#39;},
        &#39;weights&#39;: array([1., 1., 1.])}},
      &#39;percoll&#39;: {&#39;0&#39;: {&#39;type&#39;: &#39;WeightedSum&#39;,
        &#39;name&#39;: &#39;weighted_sum7&#39;,
        &#39;value&#39;: 0,
        &#39;links&#39;: {0: &#39;variable&#39;, 1: &#39;variable1&#39;, 2: &#39;variable2&#39;},
        &#39;weights&#39;: array([1., 1., 1.])}},
      &#39;comcoll&#39;: {&#39;0&#39;: {&#39;type&#39;: &#39;Subtract&#39;,
        &#39;name&#39;: &#39;subtract5&#39;,
        &#39;value&#39;: 0,
        &#39;links&#39;: {0: &#39;weighted_sum8&#39;, 1: &#39;weighted_sum7&#39;}}},
      &#39;outcoll&#39;: {&#39;0&#39;: {&#39;type&#39;: &#39;Proportional&#39;,
        &#39;name&#39;: &#39;proportional5&#39;,
        &#39;value&#39;: 0,
        &#39;links&#39;: {0: &#39;subtract5&#39;},
        &#39;gain&#39;: 10}}}}}},
  &#39;level2&#39;: {&#39;level&#39;: 2,
   &#39;nodes&#39;: {&#39;col0&#39;: {&#39;col&#39;: 0,
     &#39;node&#39;: {&#39;type&#39;: &#39;PCTNode&#39;,
      &#39;name&#39;: &#39;row2col0&#39;,
      &#39;refcoll&#39;: {&#39;0&#39;: {&#39;type&#39;: &#39;Constant&#39;,
        &#39;name&#39;: &#39;constant&#39;,
        &#39;value&#39;: 1,
        &#39;links&#39;: {}}},
      &#39;percoll&#39;: {&#39;0&#39;: {&#39;type&#39;: &#39;WeightedSum&#39;,
        &#39;name&#39;: &#39;weighted_sum9&#39;,
        &#39;value&#39;: 0,
        &#39;links&#39;: {0: &#39;weighted_sum3&#39;, 1: &#39;weighted_sum5&#39;, 2: &#39;weighted_sum7&#39;},
        &#39;weights&#39;: array([1., 1., 1.])}},
      &#39;comcoll&#39;: {&#39;0&#39;: {&#39;type&#39;: &#39;Subtract&#39;,
        &#39;name&#39;: &#39;subtract6&#39;,
        &#39;value&#39;: 0,
        &#39;links&#39;: {0: &#39;constant&#39;, 1: &#39;weighted_sum9&#39;}}},
      &#39;outcoll&#39;: {&#39;0&#39;: {&#39;type&#39;: &#39;Proportional&#39;,
        &#39;name&#39;: &#39;proportional6&#39;,
        &#39;value&#39;: 0,
        &#39;links&#39;: {0: &#39;subtract6&#39;},
        &#39;gain&#39;: 10}}}},
    &#39;col1&#39;: {&#39;col&#39;: 1,
     &#39;node&#39;: {&#39;type&#39;: &#39;PCTNode&#39;,
      &#39;name&#39;: &#39;row2col1&#39;,
      &#39;refcoll&#39;: {&#39;0&#39;: {&#39;type&#39;: &#39;Constant&#39;,
        &#39;name&#39;: &#39;constant1&#39;,
        &#39;value&#39;: 1,
        &#39;links&#39;: {}}},
      &#39;percoll&#39;: {&#39;0&#39;: {&#39;type&#39;: &#39;WeightedSum&#39;,
        &#39;name&#39;: &#39;weighted_sum10&#39;,
        &#39;value&#39;: 0,
        &#39;links&#39;: {0: &#39;weighted_sum3&#39;, 1: &#39;weighted_sum5&#39;, 2: &#39;weighted_sum7&#39;},
        &#39;weights&#39;: array([1., 1., 1.])}},
      &#39;comcoll&#39;: {&#39;0&#39;: {&#39;type&#39;: &#39;Subtract&#39;,
        &#39;name&#39;: &#39;subtract7&#39;,
        &#39;value&#39;: 0,
        &#39;links&#39;: {0: &#39;constant1&#39;, 1: &#39;weighted_sum10&#39;}}},
      &#39;outcoll&#39;: {&#39;0&#39;: {&#39;type&#39;: &#39;Proportional&#39;,
        &#39;name&#39;: &#39;proportional7&#39;,
        &#39;value&#39;: 0,
        &#39;links&#39;: {0: &#39;subtract7&#39;},
        &#39;gain&#39;: 10}}}},
    &#39;col2&#39;: {&#39;col&#39;: 2,
     &#39;node&#39;: {&#39;type&#39;: &#39;PCTNode&#39;,
      &#39;name&#39;: &#39;row2col2&#39;,
      &#39;refcoll&#39;: {&#39;0&#39;: {&#39;type&#39;: &#39;Constant&#39;,
        &#39;name&#39;: &#39;constant2&#39;,
        &#39;value&#39;: 1,
        &#39;links&#39;: {}}},
      &#39;percoll&#39;: {&#39;0&#39;: {&#39;type&#39;: &#39;WeightedSum&#39;,
        &#39;name&#39;: &#39;weighted_sum11&#39;,
        &#39;value&#39;: 0,
        &#39;links&#39;: {0: &#39;weighted_sum3&#39;, 1: &#39;weighted_sum5&#39;, 2: &#39;weighted_sum7&#39;},
        &#39;weights&#39;: array([1., 1., 1.])}},
      &#39;comcoll&#39;: {&#39;0&#39;: {&#39;type&#39;: &#39;Subtract&#39;,
        &#39;name&#39;: &#39;subtract8&#39;,
        &#39;value&#39;: 0,
        &#39;links&#39;: {0: &#39;constant2&#39;, 1: &#39;weighted_sum11&#39;}}},
      &#39;outcoll&#39;: {&#39;0&#39;: {&#39;type&#39;: &#39;Proportional&#39;,
        &#39;name&#39;: &#39;proportional8&#39;,
        &#39;value&#39;: 0,
        &#39;links&#39;: {0: &#39;subtract8&#39;},
        &#39;gain&#39;: 10}}}}}}},
 &#39;post&#39;: {&#39;post0&#39;: {&#39;type&#39;: &#39;Constant&#39;,
   &#39;name&#39;: &#39;postcon&#39;,
   &#39;value&#39;: 10,
   &#39;links&#39;: {}}}}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Get the output function, which will be the output function of the last node, or the last item of the post-processor functions, if present.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">link</span> <span class="o">=</span> <span class="n">hpct</span><span class="o">.</span><span class="n">get_output_function</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">link</span><span class="o">.</span><span class="n">get_config</span><span class="p">())</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>{&#39;type&#39;: &#39;Constant&#39;, &#39;name&#39;: &#39;postcon&#39;, &#39;value&#39;: 10, &#39;links&#39;: {}}
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Running-a-hierarchy">Running a hierarchy<a class="anchor-link" href="#Running-a-hierarchy"> </a></h2><p>The hierachy can be run one by calling itself. The verbose flag will print the computations to the screen.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">hpct</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>precon 5.000 
row0col0 0.000 0.000 0.000 0.000 
row0col1 0.000 0.000 0.000 0.000 
row0col2 0.000 0.000 0.000 0.000 
row1col0 0.000 0.000 0.000 0.000 
row1col1 0.000 0.000 0.000 0.000 
row1col2 0.000 0.000 0.000 0.000 
row2col0 1.000 0.000 1.000 10.000 
row2col1 1.000 0.000 1.000 10.000 
row2col2 1.000 0.000 1.000 10.000 
postcon 10.000 

</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>10</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>A hierarchy can be executed with the "run()" method, providing the number of iterations to run.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">hpct1</span> <span class="o">=</span> <span class="n">PCTHierarchy</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span> <span class="n">pre</span><span class="o">=</span><span class="p">[</span><span class="n">pre</span><span class="p">],</span> <span class="n">post</span><span class="o">=</span><span class="p">[</span><span class="n">post</span><span class="p">],</span> <span class="n">history</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">links</span><span class="o">=</span><span class="s2">&quot;dense&quot;</span><span class="p">)</span>
<span class="n">hpct1</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>10</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Viewing-Data">Viewing Data<a class="anchor-link" href="#Viewing-Data"> </a></h2><p>If the hierarchy is created with the "history" flag equal to True, the data can be retrieved for each node. The node is accessed by specifying the row and column within the hierarchy.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">hpct1</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">history</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">hpct1</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">history</span><span class="o">.</span><span class="n">data</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;refcoll&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;weighted_sum6&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">30.0</span><span class="p">,</span> <span class="mf">30.0</span><span class="p">,</span> <span class="mf">30.0</span><span class="p">,</span> <span class="mf">30.0</span><span class="p">,</span> <span class="mf">30.0</span><span class="p">,</span> <span class="mf">30.0</span><span class="p">,</span> <span class="mf">30.0</span><span class="p">,</span> <span class="mf">30.0</span><span class="p">,</span> <span class="mf">30.0</span><span class="p">]},</span> <span class="s1">&#39;percoll&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;weighted_sum5&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]},</span> <span class="s1">&#39;comcoll&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;subtract4&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">30.0</span><span class="p">,</span> <span class="mf">30.0</span><span class="p">,</span> <span class="mf">30.0</span><span class="p">,</span> <span class="mf">30.0</span><span class="p">,</span> <span class="mf">30.0</span><span class="p">,</span> <span class="mf">30.0</span><span class="p">,</span> <span class="mf">30.0</span><span class="p">,</span> <span class="mf">30.0</span><span class="p">,</span> <span class="mf">30.0</span><span class="p">]},</span> <span class="s1">&#39;outcoll&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;proportional4&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">300.0</span><span class="p">,</span> <span class="mf">300.0</span><span class="p">,</span> <span class="mf">300.0</span><span class="p">,</span> <span class="mf">300.0</span><span class="p">,</span> <span class="mf">300.0</span><span class="p">,</span> <span class="mf">300.0</span><span class="p">,</span> <span class="mf">300.0</span><span class="p">,</span> <span class="mf">300.0</span><span class="p">,</span> <span class="mf">300.0</span><span class="p">]}}</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>{&#39;refcoll&#39;: {&#39;weighted_sum6&#39;: [0.0, 30.0, 30.0, 30.0, 30.0, 30.0, 30.0, 30.0, 30.0, 30.0]}, &#39;percoll&#39;: {&#39;weighted_sum5&#39;: [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]}, &#39;comcoll&#39;: {&#39;subtract4&#39;: [0.0, 30.0, 30.0, 30.0, 30.0, 30.0, 30.0, 30.0, 30.0, 30.0]}, &#39;outcoll&#39;: {&#39;proportional4&#39;: [0.0, 300.0, 300.0, 300.0, 300.0, 300.0, 300.0, 300.0, 300.0, 300.0]}}
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Examples">Examples<a class="anchor-link" href="#Examples"> </a></h2>
</div>
</div>
</div>
</div>
 

